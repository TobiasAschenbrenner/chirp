<nav class="navbar">
  <div class="navbar__backdrop" *ngIf="open()" (click)="close()"></div>

  <div class="container navbar__container">
    <a routerLink="/home" class="navbar__logo">CHIRP</a>

    <div class="navbar__searchWrap">
      <form class="navbar__search" (submit)="$event.preventDefault()">
        <input
          type="search"
          [formControl]="search"
          placeholder="Search users..."
          (focus)="open.set(true)"
          autocomplete="off"
        />
        <button type="button" aria-label="Search">
          <mat-icon>search</mat-icon>
        </button>
      </form>

      <div class="navbar__searchResults" *ngIf="open()">
        <div class="navbar__searchLoading" *ngIf="searching()">Searchingâ€¦</div>

        <button
          type="button"
          class="navbar__searchItem"
          *ngFor="let u of results()"
          (click)="goToUser(u._id)"
        >
          <app-profile-image *ngIf="u.profilePhoto" [src]="u.profilePhoto" size="sm" />
          <span class="navbar__searchName">{{ u.fullName }}</span>
        </button>

        <div class="navbar__searchEmpty" *ngIf="canShowEmpty">No users found</div>
      </div>
    </div>

    <div class="navbar__right">
      <a
        *ngIf="auth.getUserId() as userId"
        [routerLink]="['/users', userId]"
        class="navbar__profile"
        aria-label="Profile"
      >
        <app-profile-image *ngIf="user()?.profilePhoto" [src]="user()!.profilePhoto" size="sm" />
      </a>

      <button *ngIf="auth.isLoggedIn()" type="button" class="linkish" (click)="logout()">
        Logout
      </button>
    </div>
  </div>
</nav>
